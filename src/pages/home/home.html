<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons start>
      <button ion-button icon-only (click)="toggleBuscaTemas()">
        <ion-icon name="pricetag"></ion-icon>
      </button>
    </ion-buttons>
    <ion-searchbar (ionInput)="busca($event)" [(ngModel)]="filtro" placeholder="Buscar..."></ion-searchbar>
    <ion-buttons end>
      <button ion-button icon-only (click)="onClickSearch()">
        <ion-icon name="search"></ion-icon>
      </button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content overflow-scroll=’true’>
  <ion-list *ngIf="buscaTemas" no-lines>
    <ion-list-header>Buscar por temas:</ion-list-header>
    <ion-item text-wrap>
      <button ion-button small color="light" (click)="limparFiltroTemas()">Todos</button>
      <button *ngFor="let tema of temas" ion-button small color="light" (click)="onClickTema(tema)" text-wrap>{{tema}}</button>
    </ion-item>
  </ion-list>
  <ion-item><span style="font-size: 0.85em;">Total de registros: {{proposicoes.length}}</span></ion-item>
  <ion-list *ngIf="proposicoes.length > 0" [virtualScroll]="proposicoes" approxItemHeight="65px">
    <button ion-item *virtualItem="let proposicao" (click)="onClickProposicao(proposicao)">
      <ion-avatar item-start>
        <img [src]="proposicao.tipoImg">
      </ion-avatar>
      <h2>
        {{proposicao.siglaTipo}} {{proposicao.numero}}/{{proposicao.ano}}
      </h2>
      <div class="barra-full">
        <div class="barra-chance" [style]="widthStyleByPercentage(proposicao.chance)">
              {{textByPercentage(proposicao.chance)}}
        </div>
      </div>
      <p>
        <ion-badge *ngFor="let tema of proposicao.temas" style="margin: 1px" color="light">{{tema.tema}}</ion-badge>
      </p>
    </button>
  </ion-list>
  <ion-item *ngIf="proposicoes.length == 0">Não há proposições</ion-item>
</ion-content>