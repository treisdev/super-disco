<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons left>
      <button ion-button icon-only [navPush]="aboutPage">
        <ion-icon name="information-circle"></ion-icon>
      </button>
    </ion-buttons>
    <ion-searchbar (ionInput)="busca($event)" [(ngModel)]="filtro" placeholder="Tema ou Proposição"></ion-searchbar>
    <ion-buttons right>
      <button ion-button icon-only (click)="onClickSearch()">
        <ion-icon name="search"></ion-icon>
      </button>
    </ion-buttons>
  </ion-toolbar>
  <ion-segment [(ngModel)]="ordenacao" (ionChange)="onChangeOrdenacao()">
    <ion-segment-button value="chance">
      Chance
    </ion-segment-button>
    <ion-segment-button value="hot">
      Tramitadas (30 dias)
    </ion-segment-button>
  </ion-segment>
</ion-header>

<ion-content overflow-scroll=’true’>
  <ion-item *ngIf="proposicoes.length === 0">
    <span text-wrap style="font-size: 0.85em;"><strong>Nenhuma proposição encontrada.</strong></span>
  </ion-item>
  <ion-list [virtualScroll]="proposicoes" approxItemHeight="65px" [headerFn]="proposicaoHeaderFn">
    <ion-item-divider *virtualHeader="let header">
      {{ header }}
    </ion-item-divider>
    <button ion-item *virtualItem="let proposicao" (click)="onClickProposicao(proposicao)">
      <ion-avatar item-start>
          <svg height="50" width="50" viewBox="0 0 100 100">
            <circle cx="50" cy="50" r="40" [attr.fill]="this.colorByTipo(proposicao.siglaTipo)" />
            <text font-family="LucidaGrande-Bold, Lucida Grande"
              font-size="30" font-weight="bold"
              text-anchor="middle"
              alignment-baseline="middle"
              fill="#ffffff"
              x="50" y="52">
              {{proposicao.siglaTipo}}
            </text>
          </svg>
      </ion-avatar>
      <h2>
        {{proposicao.siglaTipo}} {{proposicao.numero}}/{{proposicao.ano}}
      </h2>
      <p>
        <ion-badge *ngFor="let tema of proposicao.temas" style="margin: 1px" color="light">{{tema.tema}}</ion-badge>
      </p>
      <ion-avatar item-end>
        <svg width="32" height="32" viewBox="0 0 187 187">
            <polygon id="Polygon" [attr.fill]="this.colorByPercentage(proposicao.chance).background"
                     points="93.0762609 5 170.152522 49.5 170.152522 138.5 93.0762609 183 16 138.5 16 49.5"></polygon>
            <text id="badge-chance-text"
              font-family="LucidaGrande-Bold, Lucida Grande"
              font-size="45" font-weight="bold"
              letter-spacing="-4.5"
              text-anchor="middle"
              [attr.fill]="this.colorByPercentage(proposicao.chance).foreground"
              x="95" y="110">
              {{this.chanceToText(proposicao.chance)}}
            </text>
        </svg>
      </ion-avatar>
    </button>
  </ion-list>
</ion-content>
